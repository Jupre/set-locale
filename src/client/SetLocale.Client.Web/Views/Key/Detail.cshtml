@using SetLocale.Client.Web.Helpers

@model SetLocale.Client.Web.Models.KeyModel

@{
    ViewBag.Title = Model.Key;
}

<h3>@ViewBag.Title</h3>
<hr />

<div class="row">
    @foreach (var tag in Model.Tags)
    {
        <a class="label label-info" href="/tag/index/@tag.UrlName">@tag.Name</a>

       }
<input type="button" class="btn btn-sm btn-primary btnNewTranslate pull-right" value="@Html.LocalizationString("btn_words_new_word")" data-id="@Model.Key" />
    @Html.AntiForgeryToken()
</div>


<div class="row">
    <div class="table-responsive">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th>@Html.LocalizationString("language")</th>
                    <th>@Html.LocalizationString("translation")</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.Translations)
                {
                    <tr>
                        <td>
                            <a type="button" class="btn btn-sm btn-warning" href="/key/edit/@Model.Key">@Html.LocalizationString("edit")</a>
                        </td>
                        <td> <img src="@item.Language.ImageUrl" alt="@item.Language.Name" /> @item.Language.Name</td>
                        <td>@item.Value</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section script
{
    <script>
        $(function () {
                     
            $("input.btnNewTranslate").click(function () {
                var keyId = $(this).data("id");               
                        var row = $("<tr />");
                        var url = "#";
                        var inputSaveButton = $("<input />");
                        
                        inputSaveButton.attr("class","btn btn-sm btn-primary btnAction");
                        
                        inputSaveButton.attr("data-id", keyId);                       
                        inputSaveButton.attr("value",'@Html.LocalizationString("btn_menu_settings_new_translator_save")');
                        inputSaveButton.click(function () {
                           
                            inputSaveButton.remove();
                            url = "/key/edit/@Model.Key";
                            var aEditButton = $("<a />");
                            aEditButton.addClass("btn btn-sm btn-warning btnEdit");
                            aEditButton.attr("data-id", keyId);
                            aEditButton.attr("href", url);
                            aEditButton.html('@Html.LocalizationString("btn_menu_settings_new_translator_edit")');
                            tdSaveButton.append(aEditButton);
                          
                            tdLanguage.html("Turkish");
                            var asd = $('input[name="tbCeviri"]').val();
                            
                            
                            tdTranslation.html(asd);

                        });

                        var tdSaveButton = $("<td />");
                        tdSaveButton.append(inputSaveButton);
                        row.append(tdSaveButton);

                        var tdLanguage = $("<td />");
                        var ddLanguage = $("<select />");
                        var ddOption = $("<option />");
                         ddOption.attr("value","1");
                         ddOption.html("Turkish");
                         
                        ddLanguage.append(ddOption);
                        tdLanguage.append(ddLanguage);
                        row.append(tdLanguage);
                        
                        var tdTranslation = $("<td />");
                        var tbTranslation = $("<input />");
                        tbTranslation.attr("type", "Text");
                        tbTranslation.attr("name", "tbCeviri");
                        tdTranslation.append(tbTranslation);
                        row.append(tdTranslation);

                        $('table tbody').append(row);
         
              
            });
            $("a.btnEdit").click(function () {
                url = "/key/edit/@Model.Key";
            });

        });
    </script>
}